{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _excluded = [\"children\", \"style\"],\n  _excluded2 = [\"height\", \"width\", \"arrowProps\", \"actualPlacement\", \"style\", \"borderColor\", \"backgroundColor\"];\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\nimport React from 'react';\nimport { useOverlayPosition } from '@react-native-aria/overlays';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { createContext } from \"../../../utils\";\nimport Box from \"../../primitives/Box\";\n\nimport { useHasResponsiveProps } from \"../../../hooks/useHasResponsiveProps\";\nvar defaultArrowHeight = 15;\nvar defaultArrowWidth = 15;\nvar getDiagonalLength = function getDiagonalLength(height, width) {\n  return Math.pow(height * height + width * width, 0.5);\n};\nvar _createContext = createContext('PopperContext'),\n  _createContext2 = _slicedToArray(_createContext, 2),\n  PopperProvider = _createContext2[0],\n  usePopperContext = _createContext2[1];\nvar Popper = function Popper(props) {\n  return React.createElement(PopperProvider, props, props.children);\n};\nvar PopperContent = React.forwardRef(function (_ref, ref) {\n  var children = _ref.children,\n    style = _ref.style,\n    rest = _objectWithoutProperties(_ref, _excluded);\n  var _usePopperContext = usePopperContext('PopperContent'),\n    triggerRef = _usePopperContext.triggerRef,\n    shouldFlip = _usePopperContext.shouldFlip,\n    crossOffset = _usePopperContext.crossOffset,\n    offset = _usePopperContext.offset,\n    placementProp = _usePopperContext.placement,\n    onClose = _usePopperContext.onClose,\n    shouldOverlapWithTrigger = _usePopperContext.shouldOverlapWithTrigger,\n    setOverlayRef = _usePopperContext.setOverlayRef;\n  var overlayRef = React.useRef(null);\n\n  var _useOverlayPosition = useOverlayPosition({\n      targetRef: triggerRef,\n      overlayRef: overlayRef,\n      shouldFlip: shouldFlip,\n      crossOffset: crossOffset,\n      isOpen: rest.isOpen,\n      offset: offset,\n      placement: placementProp,\n      containerPadding: 0,\n      onClose: onClose,\n      shouldOverlapWithTrigger: shouldOverlapWithTrigger\n    }),\n    overlayProps = _useOverlayPosition.overlayProps,\n    rendered = _useOverlayPosition.rendered,\n    arrowProps = _useOverlayPosition.arrowProps,\n    placement = _useOverlayPosition.placement;\n  var restElements = [];\n  var arrowElement = null;\n  React.useEffect(function () {\n    setOverlayRef && setOverlayRef(overlayRef);\n  }, [overlayRef, setOverlayRef]);\n\n  React.Children.forEach(children, function (child) {\n    if (React.isValidElement(child) &&\n    child.type.displayName === 'PopperArrow') {\n      arrowElement = React.cloneElement(child, {\n        arrowProps: arrowProps,\n        actualPlacement: placement\n      });\n    } else {\n      restElements.push(child);\n    }\n  });\n  var arrowHeight = 0;\n  var arrowWidth = 0;\n  if (arrowElement) {\n    arrowHeight = defaultArrowHeight;\n    arrowWidth = defaultArrowWidth;\n\n    if (arrowElement.props.height) {\n      arrowHeight = arrowElement.props.height;\n    }\n\n    if (arrowElement.props.width) {\n      arrowWidth = arrowElement.props.width;\n    }\n  }\n  var containerStyle = React.useMemo(function () {\n    return getContainerStyle({\n      placement: placement,\n      arrowHeight: arrowHeight,\n      arrowWidth: arrowWidth\n    });\n  }, [arrowHeight, arrowWidth, placement]);\n  var overlayStyle = React.useMemo(function () {\n    return StyleSheet.create({\n      overlay: _objectSpread(_objectSpread({}, overlayProps.style), {}, {\n        opacity: rendered ? 1 : 0,\n        position: 'absolute'\n      })\n    });\n  }, [rendered, overlayProps.style]);\n\n  if (useHasResponsiveProps(rest)) {\n    return null;\n  }\n  return React.createElement(View, {\n    ref: overlayRef,\n    collapsable: false,\n    style: overlayStyle.overlay\n  }, arrowElement, React.createElement(Box, _extends({\n    style: StyleSheet.flatten([containerStyle, style])\n  }, rest, {\n    ref: ref\n  }), restElements));\n});\n\nvar PopperArrow = React.forwardRef(function (_ref2, ref) {\n  var _ref2$height = _ref2.height,\n    height = _ref2$height === void 0 ? defaultArrowHeight : _ref2$height,\n    _ref2$width = _ref2.width,\n    width = _ref2$width === void 0 ? defaultArrowWidth : _ref2$width,\n    arrowProps = _ref2.arrowProps,\n    actualPlacement = _ref2.actualPlacement,\n    style = _ref2.style,\n    _ref2$borderColor = _ref2.borderColor,\n    borderColor = _ref2$borderColor === void 0 ? '#52525b' : _ref2$borderColor,\n    _ref2$backgroundColor = _ref2.backgroundColor,\n    backgroundColor = _ref2$backgroundColor === void 0 ? 'black' : _ref2$backgroundColor,\n    rest = _objectWithoutProperties(_ref2, _excluded2);\n  var additionalStyles = React.useMemo(function () {\n    return getArrowStyles({\n      placement: actualPlacement,\n      height: height,\n      width: width\n    });\n  }, [actualPlacement, height, width]);\n  var triangleStyle = React.useMemo(function () {\n    return {\n      position: 'absolute',\n      width: width,\n      height: height\n    };\n  }, [width, height]);\n  var arrowStyles = React.useMemo(function () {\n    return [arrowProps.style, triangleStyle, additionalStyles, style];\n  }, [triangleStyle, additionalStyles, arrowProps.style, style]);\n  return React.createElement(Box, _extends({\n    ref: ref,\n    style: arrowStyles,\n    borderColor: borderColor,\n    backgroundColor: backgroundColor,\n    zIndex: 1\n  }, rest));\n});\nvar getArrowStyles = function getArrowStyles(props) {\n  var additionalStyles = {\n    transform: []\n  };\n  var diagonalLength = getDiagonalLength(defaultArrowHeight, defaultArrowHeight);\n  if (props.placement === 'top' && props.width) {\n    additionalStyles.transform.push({\n      translateX: -props.width / 2\n    });\n    additionalStyles.transform.push({\n      rotate: '45deg'\n    });\n    additionalStyles.bottom = Math.ceil((diagonalLength - defaultArrowHeight) / 2);\n    additionalStyles.borderBottomWidth = 1;\n    additionalStyles.borderRightWidth = 1;\n  }\n  if (props.placement === 'bottom' && props.width) {\n    additionalStyles.transform.push({\n      translateX: -props.width / 2\n    });\n    additionalStyles.transform.push({\n      rotate: '45deg'\n    });\n    additionalStyles.top = Math.ceil((diagonalLength - defaultArrowHeight) / 2);\n    additionalStyles.borderTopWidth = 1;\n    additionalStyles.borderLeftWidth = 1;\n  }\n  if (props.placement === 'left' && props.height) {\n    additionalStyles.transform.push({\n      translateY: -props.height / 2\n    });\n    additionalStyles.transform.push({\n      rotate: '45deg'\n    });\n    additionalStyles.right = Math.ceil((diagonalLength - defaultArrowHeight) / 2);\n    additionalStyles.borderTopWidth = 1;\n    additionalStyles.borderRightWidth = 1;\n  }\n  if (props.placement === 'right' && props.height) {\n    additionalStyles.transform.push({\n      translateY: -props.height / 2\n    });\n    additionalStyles.transform.push({\n      rotate: '45deg'\n    });\n    additionalStyles.left = Math.ceil((diagonalLength - defaultArrowHeight) / 2);\n    additionalStyles.borderBottomWidth = 1;\n    additionalStyles.borderLeftWidth = 1;\n  }\n  return additionalStyles;\n};\nvar getContainerStyle = function getContainerStyle(_ref3) {\n  var placement = _ref3.placement,\n    arrowHeight = _ref3.arrowHeight;\n  var diagonalLength = getDiagonalLength(arrowHeight, arrowHeight) / 2;\n  if (placement === 'top') {\n    return {\n      marginBottom: diagonalLength\n    };\n  }\n  if (placement === 'bottom') {\n    return {\n      marginTop: diagonalLength\n    };\n  }\n  if (placement === 'left') {\n    return {\n      marginRight: diagonalLength\n    };\n  }\n  if (placement === 'right') {\n    return {\n      marginLeft: diagonalLength\n    };\n  }\n  return {};\n};\nPopperArrow.displayName = 'PopperArrow';\nPopper.Content = PopperContent;\nPopper.Arrow = PopperArrow;\nexport { Popper };","map":{"version":3,"sources":["Popper.tsx"],"names":["React","useOverlayPosition","createContext","Box","useHasResponsiveProps","defaultArrowHeight","defaultArrowWidth","getDiagonalLength","height","width","Math","pow","PopperProvider","usePopperContext","Popper","props","children","PopperContent","forwardRef","style","rest","ref","triggerRef","shouldFlip","crossOffset","offset","placement","placementProp","onClose","shouldOverlapWithTrigger","setOverlayRef","overlayRef","useRef","overlayProps","rendered","arrowProps","targetRef","isOpen","containerPadding","restElements","arrowElement","useEffect","Children","forEach","child","isValidElement","type","displayName","cloneElement","actualPlacement","push","arrowHeight","arrowWidth","containerStyle","useMemo","getContainerStyle","overlayStyle","create","overlay","opacity","position","StyleSheet","flatten","PopperArrow","borderColor","backgroundColor","additionalStyles","getArrowStyles","triangleStyle","arrowStyles","transform","diagonalLength","translateX","rotate","bottom","ceil","borderBottomWidth","borderRightWidth","top","borderTopWidth","borderLeftWidth","translateY","right","left","marginBottom","marginTop","marginRight","marginLeft","Content","Arrow"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,kBAAT,QAAmC,6BAAnC;AAAA;AAAA;AAQA,SAASC,aAAT;AACA,OAAOC,GAAP;;AAEA,SAASC,qBAAT;AAEA,IAAMC,kBAAkB,GAAG,EAA3B;AACA,IAAMC,iBAAiB,GAAG,EAA1B;AAEA,IAAMC,iBAAiB,GAAG,SAApBA,iBAAiB,CAAIC,MAAD,EAAiBC,KAAjB,EAAmC;EAC3D,OAAOC,IAAI,CAACC,GAALD,CAASF,MAAM,GAAGA,MAATA,GAAkBC,KAAK,GAAGA,KAAnCC,EAA0C,GAA1CA,CAAP;AACD,CAFD;AAUA,qBAA2CR,aAAa,CACtD,eADsD,CAAxD;EAAA;EAAOU,cAAD;EAAiBC,gBAAjB;AAIN,IAAMC,MAAM,GACVC,SADID,MAAM,CACVC,KADa,EAMV;EACH,OAAO,KAAA,CAAA,aAAA,CAAC,cAAD,EAAoBA,KAApB,EAA4BA,KAAK,CAACC,QAAlC,CAAP;AACD,CARD;AAUA,IAAMC,aAAa,GAAG,KAAK,CAACC,UAAN,CACpB,gBAAgEG,GAAhE,EAA6E;EAAA,IAA1EL,QAAF,QAAEA,QAAF;IAAYG,KAAZ,QAAYA,KAAZ;IAAsBC,IAAAA;EACrB,wBASIP,gBAAgB,CAAC,eAAD,CATpB;IACES,UADI,qBACJA,UADI;IAEJC,UAFI,qBAEJA,UAFI;IAGJC,WAHI,qBAGJA,WAHI;IAIJC,MAJI,qBAIJA,MAJI;IAKOE,aALP,qBAKJD,SAAS;IACTE,OANI,qBAMJA,OANI;IAOJC,wBAPI,qBAOJA,wBAPI;IAQJC,aAAAA,qBAAAA,aAAAA;EAEF,IAAMC,UAAU,GAAG/B,KAAK,CAACgC,MAANhC,CAAa,IAAbA,CAXwD;;EAc3E,0BAKIC,kBAAkB,CAAC;MACrBmC,SAAS,EAAEd,UADU;MAErBS,UAFqB,EAErBA,UAFqB;MAGrBR,UAAU,EAAEA,UAHS;MAIrBC,WAAW,EAAEA,WAJQ;MAKrBa,MAAM,EAAEjB,IAAI,CAACiB,MALQ;MAMrBZ,MAAM,EAAEA,MANa;MAOrBC,SAAS,EAAEC,aAPU;MAQrBW,gBAAgB,EAAE,CARG;MASrBV,OAAO,EAAEA,OATY;MAUrBC,wBAAAA,EAAAA;IAVqB,CAAD,CALtB;IACEI,YADI,uBACJA,YADI;IAEJC,QAFI,uBAEJA,QAFI;IAGJC,UAHI,uBAGJA,UAHI;IAIJT,SAAAA,uBAAAA,SAAAA;EAcF,IAAMa,YAA+B,GAAG,EAAxC;EACA,IAAIC,YAAuC,GAAG,IAA9C;EAEAxC,KAAK,CAACyC,SAANzC,CAAgB,YAAM;IACpB8B,aAAa,IAAIA,aAAa,CAACC,UAAD,CAA9BD;EACD,CAFD9B,EAEG,CAAC+B,UAAD,EAAaD,aAAb,CAFH9B,CAnC2E;;EAyC3EA,KAAK,CAAC0C,QAAN1C,CAAe2C,OAAf3C,CAAuBgB,QAAvBhB,EAAkC4C,UAAAA,KAAD,EAAW;IAC1C,IACE,KAAK,CAACC,cAAN,CAAqBD,KAArB,CAAA;IAEAA,KAAK,CAACE,IAANF,CAAWG,WAAXH,KAA2B,aAH7B,EAIE;MACAJ,YAAY,GAAG,KAAK,CAACQ,YAAN,CAAmBJ,KAAnB,EAA0B;QAEvCT,UAFuC,EAEvCA,UAFuC;QAGvCc,eAAe,EAAEvB;MAHsB,CAA1B,CAAfc;IAKD,CAVD,MAUO;MACLD,YAAY,CAACW,IAAbX,CAAkBK,KAAlBL,CAAAA;IACD;EACF,CAdDvC,CAAAA;EAgBA,IAAImD,WAAW,GAAG,CAAlB;EACA,IAAIC,UAAU,GAAG,CAAjB;EAEA,IAAIZ,YAAJ,EAAkB;IAChBW,WAAW,GAAG9C,kBAAd8C;IACAC,UAAU,GAAG9C,iBAFG;;IAKhB,IAAIkC,YAAY,CAACzB,KAAbyB,CAAmBhC,MAAvB,EAA+B;MAE7B2C,WAAW,GAAGX,YAAY,CAACzB,KAAbyB,CAAmBhC,MAAjC2C;IAPc;;IAWhB,IAAIX,YAAY,CAACzB,KAAbyB,CAAmB/B,KAAvB,EAA8B;MAE5B2C,UAAU,GAAGZ,YAAY,CAACzB,KAAbyB,CAAmB/B,KAAhC2C;IACD;EACF;EAED,IAAMC,cAAc,GAAG,KAAK,CAACC,OAAN,CACrB;IAAA,OACEC,iBAAiB,CAAC;MAChB7B,SADgB,EAChBA,SADgB;MAEhByB,WAFgB,EAEhBA,WAFgB;MAGhBC,UAAAA,EAAAA;IAHgB,CAAD,CAFE;EAAA,GAOrB,CAACD,WAAD,EAAcC,UAAd,EAA0B1B,SAA1B,CAPqB,CAAvB;EAUA,IAAM8B,YAAY,GAAG,KAAK,CAACF,OAAN,CACnB;IAAA,OACE,UAAU,CAACG,MAAX,CAAkB;MAChBC,OAAO,kCACFzB,YAAY,CAACd,KADT;QAIPwC,OAAO,EAAEzB,QAAQ,GAAG,CAAH,GAAO,CAJjB;QAKP0B,QAAQ,EAAE;MAAA;IANI,CAAlB,CAFiB;EAAA,GAWnB,CAAC1B,QAAD,EAAWD,YAAY,CAACd,KAAxB,CAXmB,CAvFsD;;EAqG3E,IAAIf,qBAAqB,CAACgB,IAAD,CAAzB,EAAiC;IAC/B,OAAO,IAAP;EACD;EAED,OACE,KAAA,CAAA,aAAA,CAAC,IAAD,EAAA;IAAM,GAAG,EAAEW,UAAX;IAAuB,WAAW,EAAE,KAApC;IAA2C,KAAK,EAAEyB,YAAY,CAACE;EAA/D,CAAA,EACGlB,YADH,EAEE,KAAA,CAAA,aAAA,CAAC,GAAD,EAAA,QAAA,CAAA;IACE,KAAK,EAAEqB,UAAU,CAACC,OAAXD,CAAmB,CAACR,cAAD,EAAiBlC,KAAjB,CAAnB0C;EADT,CAAA,EAEMzC,IAFN,EAAA;IAGE,GAAG,EAAEC;EAHP,CAAA,CAAA,EAKGkB,YALH,CAFF,CADF;AAYD,CAtHmB,CAAtB;;AA0HA,IAAMwB,WAAW,GAAG,KAAK,CAAC7C,UAAN,CAClB,iBAcEG,GAdF,EAeK;EAAA,yBAbDb,MAAM;IAANA,MAAM,6BAAGH,kBADX;IAAA,oBAEEI,KAAK;IAALA,KAAK,4BAAGH,iBAFV;IAKE6B,UALF,SAKEA,UALF;IAOEc,eAPF,SAOEA,eAPF;IAQE9B,KARF,SAQEA,KARF;IAAA,0BASE6C,WAAW;IAAXA,WAAW,kCAAG,SAThB;IAAA,8BAUEC,eAAe;IAAfA,eAAe,sCAAG,OAVpB;IAWK7C,IAAAA;EAIL,IAAM8C,gBAAgB,GAAG,KAAK,CAACZ,OAAN,CACvB;IAAA,OAAMa,cAAc,CAAC;MAAEzC,SAAS,EAAEuB,eAAb;MAA8BzC,MAA9B,EAA8BA,MAA9B;MAAsCC,KAAAA,EAAAA;IAAtC,CAAD,CADG;EAAA,GAEvB,CAACwC,eAAD,EAAkBzC,MAAlB,EAA0BC,KAA1B,CAFuB,CAAzB;EAKA,IAAM2D,aAAwB,GAAG,KAAK,CAACd,OAAN,CAC/B;IAAA,OAAO;MACLM,QAAQ,EAAE,UADL;MAELnD,KAFK,EAELA,KAFK;MAGLD,MAAAA,EAAAA;IAHK,CAAP;EAAA,CAD+B,EAM/B,CAACC,KAAD,EAAQD,MAAR,CAN+B,CAAjC;EASA,IAAM6D,WAAW,GAAGrE,KAAK,CAACsD,OAANtD,CAClB;IAAA,OAAM,CAACmC,UAAU,CAAChB,KAAZ,EAAmBiD,aAAnB,EAAkCF,gBAAlC,EAAoD/C,KAApD,CADYnB;EAAAA,GAElB,CAACoE,aAAD,EAAgBF,gBAAhB,EAAkC/B,UAAU,CAAChB,KAA7C,EAAoDA,KAApD,CAFkBnB,CAApB;EAKA,OACE,KAAA,CAAA,aAAA,CAAC,GAAD,EAAA,QAAA,CAAA;IACE,GAAG,EAAEqB,GADP;IAEE,KAAK,EAAEgD,WAFT;IAGE,WAAW,EAAEL,WAHf;IAIE,eAAe,EAAEC,eAJnB;IAKE,MAAM,EAAE;EALV,CAAA,EAMM7C,IANN,CAAA,CADF;AAUD,CA9CiB,CAApB;AAiDA,IAAM+C,cAAc,GAAIpD,SAAlBoD,cAAc,CAAIpD,KAAD,EAAyB;EAC9C,IAAMmD,gBAAqB,GAAG;IAC5BI,SAAS,EAAE;EADiB,CAA9B;EAIA,IAAMC,cAAc,GAAGhE,iBAAiB,CACtCF,kBADsC,EAEtCA,kBAFsC,CAAxC;EAKA,IAAIU,KAAK,CAACW,SAANX,KAAoB,KAApBA,IAA6BA,KAAK,CAACN,KAAvC,EAA8C;IAC5CyD,gBAAgB,CAACI,SAAjBJ,CAA2BhB,IAA3BgB,CAAgC;MAAEM,UAAU,EAAE,CAACzD,KAAK,CAACN,KAAP,GAAe;IAA7B,CAAhCyD,CAAAA;IACAA,gBAAgB,CAACI,SAAjBJ,CAA2BhB,IAA3BgB,CAAgC;MAAEO,MAAM,EAAE;IAAV,CAAhCP,CAAAA;IACAA,gBAAgB,CAACQ,MAAjBR,GAA0BxD,IAAI,CAACiE,IAALjE,CACxB,CAAC6D,cAAc,GAAGlE,kBAAlB,IAAwC,CADhBK,CAA1BwD;IAGAA,gBAAgB,CAACU,iBAAjBV,GAAqC,CAArCA;IACAA,gBAAgB,CAACW,gBAAjBX,GAAoC,CAApCA;EACD;EAED,IAAInD,KAAK,CAACW,SAANX,KAAoB,QAApBA,IAAgCA,KAAK,CAACN,KAA1C,EAAiD;IAC/CyD,gBAAgB,CAACI,SAAjBJ,CAA2BhB,IAA3BgB,CAAgC;MAAEM,UAAU,EAAE,CAACzD,KAAK,CAACN,KAAP,GAAe;IAA7B,CAAhCyD,CAAAA;IACAA,gBAAgB,CAACI,SAAjBJ,CAA2BhB,IAA3BgB,CAAgC;MAAEO,MAAM,EAAE;IAAV,CAAhCP,CAAAA;IACAA,gBAAgB,CAACY,GAAjBZ,GAAuBxD,IAAI,CAACiE,IAALjE,CAAU,CAAC6D,cAAc,GAAGlE,kBAAlB,IAAwC,CAAlDK,CAAvBwD;IACAA,gBAAgB,CAACa,cAAjBb,GAAkC,CAAlCA;IACAA,gBAAgB,CAACc,eAAjBd,GAAmC,CAAnCA;EACD;EAED,IAAInD,KAAK,CAACW,SAANX,KAAoB,MAApBA,IAA8BA,KAAK,CAACP,MAAxC,EAAgD;IAC9C0D,gBAAgB,CAACI,SAAjBJ,CAA2BhB,IAA3BgB,CAAgC;MAAEe,UAAU,EAAE,CAAClE,KAAK,CAACP,MAAP,GAAgB;IAA9B,CAAhC0D,CAAAA;IACAA,gBAAgB,CAACI,SAAjBJ,CAA2BhB,IAA3BgB,CAAgC;MAAEO,MAAM,EAAE;IAAV,CAAhCP,CAAAA;IACAA,gBAAgB,CAACgB,KAAjBhB,GAAyBxD,IAAI,CAACiE,IAALjE,CACvB,CAAC6D,cAAc,GAAGlE,kBAAlB,IAAwC,CADjBK,CAAzBwD;IAGAA,gBAAgB,CAACa,cAAjBb,GAAkC,CAAlCA;IACAA,gBAAgB,CAACW,gBAAjBX,GAAoC,CAApCA;EACD;EAED,IAAInD,KAAK,CAACW,SAANX,KAAoB,OAApBA,IAA+BA,KAAK,CAACP,MAAzC,EAAiD;IAC/C0D,gBAAgB,CAACI,SAAjBJ,CAA2BhB,IAA3BgB,CAAgC;MAAEe,UAAU,EAAE,CAAClE,KAAK,CAACP,MAAP,GAAgB;IAA9B,CAAhC0D,CAAAA;IACAA,gBAAgB,CAACI,SAAjBJ,CAA2BhB,IAA3BgB,CAAgC;MAAEO,MAAM,EAAE;IAAV,CAAhCP,CAAAA;IACAA,gBAAgB,CAACiB,IAAjBjB,GAAwBxD,IAAI,CAACiE,IAALjE,CACtB,CAAC6D,cAAc,GAAGlE,kBAAlB,IAAwC,CADlBK,CAAxBwD;IAGAA,gBAAgB,CAACU,iBAAjBV,GAAqC,CAArCA;IACAA,gBAAgB,CAACc,eAAjBd,GAAmC,CAAnCA;EACD;EAED,OAAOA,gBAAP;AACD,CAjDD;AAmDA,IAAMX,iBAAiB,GAAG,SAApBA,iBAAiB,QAAwD;EAAA,IAAlD7B,SAAF,SAAEA,SAAF;IAAayB,WAAAA,SAAAA,WAAAA;EACtC,IAAMoB,cAAc,GAAGhE,iBAAiB,CAAC4C,WAAD,EAAcA,WAAd,CAAjB5C,GAA8C,CAArE;EAEA,IAAImB,SAAS,KAAK,KAAlB,EAAyB;IACvB,OAAO;MAAE0D,YAAY,EAAEb;IAAhB,CAAP;EACD;EAED,IAAI7C,SAAS,KAAK,QAAlB,EAA4B;IAC1B,OAAO;MAAE2D,SAAS,EAAEd;IAAb,CAAP;EACD;EAED,IAAI7C,SAAS,KAAK,MAAlB,EAA0B;IACxB,OAAO;MAAE4D,WAAW,EAAEf;IAAf,CAAP;EACD;EAED,IAAI7C,SAAS,KAAK,OAAlB,EAA2B;IACzB,OAAO;MAAE6D,UAAU,EAAEhB;IAAd,CAAP;EACD;EAED,OAAO,CAAA,CAAP;AACD,CApBD;AAsBAR,WAAW,CAAChB,WAAZgB,GAA0B,aAA1BA;AACAjD,MAAM,CAAC0E,OAAP1E,GAAiBG,aAAjBH;AACAA,MAAM,CAAC2E,KAAP3E,GAAeiD,WAAfjD;AAEA,SAASA,MAAT","sourcesContent":["import React from 'react';\nimport { useOverlayPosition } from '@react-native-aria/overlays';\nimport { StyleSheet, View, ViewStyle } from 'react-native';\nimport type {\n  IPopperProps,\n  IScrollContentStyle,\n  IArrowStyles,\n  IPopoverArrowProps,\n} from './types';\nimport { createContext } from '../../../utils';\nimport Box, { IBoxProps } from '../../primitives/Box';\n// import { useSafeAreaInsets } from 'react-native-safe-area-context';\nimport { useHasResponsiveProps } from '../../../hooks/useHasResponsiveProps';\n\nconst defaultArrowHeight = 15;\nconst defaultArrowWidth = 15;\n\nconst getDiagonalLength = (height: number, width: number) => {\n  return Math.pow(height * height + width * width, 0.5);\n};\n\ntype PopperContext = IPopperProps & {\n  triggerRef: any;\n  onClose: any;\n  setOverlayRef?: (overlayRef: any) => void;\n};\n\nconst [PopperProvider, usePopperContext] = createContext<PopperContext>(\n  'PopperContext'\n);\n\nconst Popper = (\n  props: IPopperProps & {\n    triggerRef: any;\n    onClose: any;\n    setOverlayRef?: (overlayRef: any) => void;\n  }\n) => {\n  return <PopperProvider {...props}>{props.children}</PopperProvider>;\n};\n\nconst PopperContent = React.forwardRef(\n  ({ children, style, ...rest }: IBoxProps & { isOpen: boolean }, ref: any) => {\n    const {\n      triggerRef,\n      shouldFlip,\n      crossOffset,\n      offset,\n      placement: placementProp,\n      onClose,\n      shouldOverlapWithTrigger,\n      setOverlayRef,\n    } = usePopperContext('PopperContent');\n    const overlayRef = React.useRef(null);\n\n    // const { top } = useSafeAreaInsets();\n    const {\n      overlayProps,\n      rendered,\n      arrowProps,\n      placement,\n    } = useOverlayPosition({\n      targetRef: triggerRef,\n      overlayRef,\n      shouldFlip: shouldFlip,\n      crossOffset: crossOffset,\n      isOpen: rest.isOpen,\n      offset: offset,\n      placement: placementProp as any,\n      containerPadding: 0,\n      onClose: onClose,\n      shouldOverlapWithTrigger,\n    });\n\n    const restElements: React.ReactNode[] = [];\n    let arrowElement: React.ReactElement | null = null;\n\n    React.useEffect(() => {\n      setOverlayRef && setOverlayRef(overlayRef);\n    }, [overlayRef, setOverlayRef]);\n\n    // Might have performance impact if there are a lot of siblings!\n    // Shouldn't be an issue with popovers since it would have atmost 2. Arrow and Content.\n    React.Children.forEach(children, (child) => {\n      if (\n        React.isValidElement(child) &&\n        // @ts-ignore\n        child.type.displayName === 'PopperArrow'\n      ) {\n        arrowElement = React.cloneElement(child, {\n          // @ts-ignore\n          arrowProps,\n          actualPlacement: placement,\n        });\n      } else {\n        restElements.push(child);\n      }\n    });\n\n    let arrowHeight = 0;\n    let arrowWidth = 0;\n\n    if (arrowElement) {\n      arrowHeight = defaultArrowHeight;\n      arrowWidth = defaultArrowWidth;\n\n      //@ts-ignore\n      if (arrowElement.props.height) {\n        //@ts-ignore\n        arrowHeight = arrowElement.props.height;\n      }\n\n      //@ts-ignore\n      if (arrowElement.props.width) {\n        //@ts-ignore\n        arrowWidth = arrowElement.props.width;\n      }\n    }\n\n    const containerStyle = React.useMemo(\n      () =>\n        getContainerStyle({\n          placement,\n          arrowHeight,\n          arrowWidth,\n        }),\n      [arrowHeight, arrowWidth, placement]\n    );\n\n    const overlayStyle = React.useMemo(\n      () =>\n        StyleSheet.create({\n          overlay: {\n            ...overlayProps.style,\n            // To handle translucent android StatusBar\n            // marginTop: Platform.select({ android: top, default: 0 }),\n            opacity: rendered ? 1 : 0,\n            position: 'absolute',\n          },\n        }),\n      [rendered, overlayProps.style]\n    );\n    //TODO: refactor for responsive prop\n    if (useHasResponsiveProps(rest)) {\n      return null;\n    }\n\n    return (\n      <View ref={overlayRef} collapsable={false} style={overlayStyle.overlay}>\n        {arrowElement}\n        <Box\n          style={StyleSheet.flatten([containerStyle, style])}\n          {...rest}\n          ref={ref}\n        >\n          {restElements}\n        </Box>\n      </View>\n    );\n  }\n);\n\n// This is an internal implementation of PopoverArrow\nconst PopperArrow = React.forwardRef(\n  (\n    {\n      height = defaultArrowHeight,\n      width = defaultArrowWidth,\n\n      //@ts-ignore - Will be passed by React.cloneElement from PopperContent\n      arrowProps,\n      //@ts-ignore - Will be passed by React.cloneElement from PopperContent\n      actualPlacement,\n      style,\n      borderColor = '#52525b',\n      backgroundColor = 'black',\n      ...rest\n    }: IPopoverArrowProps & IBoxProps<IPopoverArrowProps>,\n    ref: any\n  ) => {\n    const additionalStyles = React.useMemo(\n      () => getArrowStyles({ placement: actualPlacement, height, width }),\n      [actualPlacement, height, width]\n    );\n\n    const triangleStyle: ViewStyle = React.useMemo(\n      () => ({\n        position: 'absolute',\n        width,\n        height,\n      }),\n      [width, height]\n    );\n\n    const arrowStyles = React.useMemo(\n      () => [arrowProps.style, triangleStyle, additionalStyles, style],\n      [triangleStyle, additionalStyles, arrowProps.style, style]\n    );\n\n    return (\n      <Box\n        ref={ref}\n        style={arrowStyles}\n        borderColor={borderColor}\n        backgroundColor={backgroundColor}\n        zIndex={1}\n        {...rest}\n      />\n    );\n  }\n);\n\nconst getArrowStyles = (props: IArrowStyles) => {\n  const additionalStyles: any = {\n    transform: [],\n  };\n\n  const diagonalLength = getDiagonalLength(\n    defaultArrowHeight,\n    defaultArrowHeight\n  );\n\n  if (props.placement === 'top' && props.width) {\n    additionalStyles.transform.push({ translateX: -props.width / 2 });\n    additionalStyles.transform.push({ rotate: '45deg' });\n    additionalStyles.bottom = Math.ceil(\n      (diagonalLength - defaultArrowHeight) / 2\n    );\n    additionalStyles.borderBottomWidth = 1;\n    additionalStyles.borderRightWidth = 1;\n  }\n\n  if (props.placement === 'bottom' && props.width) {\n    additionalStyles.transform.push({ translateX: -props.width / 2 });\n    additionalStyles.transform.push({ rotate: '45deg' });\n    additionalStyles.top = Math.ceil((diagonalLength - defaultArrowHeight) / 2);\n    additionalStyles.borderTopWidth = 1;\n    additionalStyles.borderLeftWidth = 1;\n  }\n\n  if (props.placement === 'left' && props.height) {\n    additionalStyles.transform.push({ translateY: -props.height / 2 });\n    additionalStyles.transform.push({ rotate: '45deg' });\n    additionalStyles.right = Math.ceil(\n      (diagonalLength - defaultArrowHeight) / 2\n    );\n    additionalStyles.borderTopWidth = 1;\n    additionalStyles.borderRightWidth = 1;\n  }\n\n  if (props.placement === 'right' && props.height) {\n    additionalStyles.transform.push({ translateY: -props.height / 2 });\n    additionalStyles.transform.push({ rotate: '45deg' });\n    additionalStyles.left = Math.ceil(\n      (diagonalLength - defaultArrowHeight) / 2\n    );\n    additionalStyles.borderBottomWidth = 1;\n    additionalStyles.borderLeftWidth = 1;\n  }\n\n  return additionalStyles;\n};\n\nconst getContainerStyle = ({ placement, arrowHeight }: IScrollContentStyle) => {\n  const diagonalLength = getDiagonalLength(arrowHeight, arrowHeight) / 2;\n\n  if (placement === 'top') {\n    return { marginBottom: diagonalLength };\n  }\n\n  if (placement === 'bottom') {\n    return { marginTop: diagonalLength };\n  }\n\n  if (placement === 'left') {\n    return { marginRight: diagonalLength };\n  }\n\n  if (placement === 'right') {\n    return { marginLeft: diagonalLength };\n  }\n\n  return {};\n};\n\nPopperArrow.displayName = 'PopperArrow';\nPopper.Content = PopperContent;\nPopper.Arrow = PopperArrow;\n\nexport { Popper };\n"]},"metadata":{},"sourceType":"module"}